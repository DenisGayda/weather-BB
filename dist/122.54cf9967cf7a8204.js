"use strict";(self.webpackChunkBackbase=self.webpackChunkBackbase||[]).push([[122],{2122:(ce,h,a)=>{a.r(h),a.d(h,{MainPageModule:()=>ae});var l=a(9808),x=a(5883),e=a(1223);let v=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[l.ez,x.T]]}),t})(),M=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({}),t})(),w=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({}),t})();var m=a(7338);const y=["Tirana","Vienna","Brussels","Sarajevo","Sofia","Zagreb","Prague","Copenhagen","Tallinn","Helsinki","Paris","Berlin","Athens","Budapest","Reykjavik","Dublin","Rome","Riga","Vaduz","Vilnius","Luxembourg","Valletta","Chisinau","Monaco","Podgorica","Amsterdam","Skopje","Oslo","Warsaw","Lisbon","Bucharest","Belgrade","Bratislava","Ljubljana","Madrid","Stockholm","Bern","Kiev","London"];var C=a(1135),_=a(8306),T=a(4742),P=a(8421),A=a(7669),F=a(5403),Z=a(3268),L=a(1810),W=a(515),B=a(262),j=a(4004),S=a(8505),U=a(8746),b=a(776),E=a(8823),J=a(8145);function I(t){const{id:r,name:n,main:{temp:o,humidity:i},wind:{speed:c,deg:s},weather:p}=t,{description:d,icon:u}=p[0];return{id:r,name:n,temperature:o,wind_speed:c,wind_direction_deg:s,description:d,humidity:i,weather_icon_url:(0,J.X)(u)}}var z=a(520);let N=(()=>{class t{constructor(n){this.http=n,this._error$=new C.X(null),this._isLoading$=new C.X(!1)}get error$(){return this._error$.asObservable()}get isLoading$(){return this._isLoading$.asObservable()}getWeather$(n){return this._isLoading$.next(!0),function $(...t){const r=(0,A.jO)(t),{args:n,keys:o}=(0,T.D)(t),i=new _.y(c=>{const{length:s}=n;if(!s)return void c.complete();const p=new Array(s);let d=s,u=s;for(let g=0;g<s;g++){let f=!1;(0,P.Xf)(n[g]).subscribe((0,F.x)(c,ie=>{f||(f=!0,u--),p[g]=ie},()=>d--,void 0,()=>{(!d||!f)&&(u||c.next(o?(0,L.n)(o,p):p),c.complete())}))}});return r?i.pipe((0,Z.Z)(r)):i}(n.map(o=>this.makeRequest$(o))).pipe((0,B.K)(o=>(this._error$.next(o),W.E)),(0,j.U)(o=>o.map(I)),(0,S.b)(()=>this._error$.next(null)),(0,U.x)(()=>this._isLoading$.next(!1)))}makeRequest$(n){return this.http.get(`${E._}/data/2.5/weather`,{params:{q:n,units:"metric",appid:b.$}})}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(z.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Q=a(2554);function R(t,r){if(1&t&&(e.TgZ(0,"div",1)(1,"div",2)(2,"div")(3,"div",3),e._uU(4),e.qZA(),e.TgZ(5,"div",4),e._uU(6),e.qZA()(),e._UZ(7,"img",5),e.qZA(),e.TgZ(8,"div",6)(9,"span"),e._uU(10,"Temperature"),e.qZA(),e.TgZ(11,"span"),e._uU(12),e.qZA()(),e.TgZ(13,"div",6)(14,"span"),e._uU(15,"Humidity"),e.qZA(),e.TgZ(16,"span"),e._uU(17),e.qZA()(),e.TgZ(18,"div",6)(19,"span"),e._uU(20,"Wind"),e.qZA(),e._UZ(21,"app-wind-info",7),e.qZA()()),2&t){const n=e.oxw();e.xp6(4),e.Oqu(n.cityWeather.name),e.xp6(2),e.Oqu(n.cityWeather.description),e.xp6(1),e.Q6J("src",n.cityWeather.weather_icon_url,e.LSH),e.xp6(5),e.hij("",n.cityWeather.temperature," \xb0C"),e.xp6(5),e.hij("",n.cityWeather.humidity," %"),e.xp6(4),e.Q6J("speed",n.cityWeather.wind_speed)("deg",n.cityWeather.wind_direction_deg)}}let Y=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-city-card"]],inputs:{cityWeather:"cityWeather"},decls:1,vars:1,consts:[["class","card-container",4,"ngIf"],[1,"card-container"],[1,"card-header"],[1,"city"],[1,"description"],["alt","cityWeather icon",3,"src"],[1,"info"],[3,"speed","deg"]],template:function(n,o){1&n&&e.YNc(0,R,22,7,"div",0),2&n&&e.Q6J("ngIf",!!o.cityWeather)},directives:[l.O5,Q.M],styles:["[_nghost-%COMP%]{display:block}.card-container[_ngcontent-%COMP%]{width:200px;height:200px;border:2px solid #0b2239;border-radius:8px;padding:8px;background:linear-gradient(to bottom,#b7eaff 0%,#fefdcf 100%)}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;vertical-align:center;margin-bottom:12px}.city[_ngcontent-%COMP%]{font-size:24px;font-weight:700}.description[_ngcontent-%COMP%]{font-size:16px}.info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:20px;line-height:24px}"],changeDetection:0}),t})(),k=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-fullscreen-loader"]],decls:1,vars:0,consts:[[1,"loader"]],template:function(n,o){1&n&&e._UZ(0,"div",0)},styles:["[_nghost-%COMP%]{position:fixed;display:block;top:0;left:0;width:100vw;height:100vh;-webkit-user-select:none;user-select:none}.loader[_ngcontent-%COMP%]{position:absolute;border:16px solid #0b2239;border-top-color:#fefdcf;border-radius:50%;width:120px;height:120px;animation:spin 2s linear infinite;left:50%;top:50%;transform:translate(-50%,-50%);margin-top:-60px;margin-left:-60px}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]}),t})(),X=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-fullscreen-error"]],decls:4,vars:0,consts:[[1,"error-container"],["src","../../../assets/images/error.png","alt","error icon",1,"error-icon"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0),e._UZ(1,"img",1),e.TgZ(2,"div"),e._uU(3,"Something went wrong. Please try later"),e.qZA()())},styles:["[_nghost-%COMP%]{position:fixed;display:block;top:0;left:0;width:100vw;height:100vh;-webkit-user-select:none;user-select:none}.error-container[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);text-align:center}.error-icon[_ngcontent-%COMP%]{width:120px;height:120px}"]}),t})();function D(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"app-city-card",7),e.NdJ("click",function(){const c=e.CHM(n).$implicit;return e.oxw(4).goToForecast(c.name)}),e.qZA()}2&t&&e.Q6J("cityWeather",r.$implicit)}function H(t,r){if(1&t&&(e.ynx(0),e.YNc(1,D,1,1,"app-city-card",6),e.BQk()),2&t){const n=e.oxw(2).weathers;e.xp6(1),e.Q6J("ngForOf",n)}}function V(t,r){if(1&t&&(e.ynx(0),e.YNc(1,H,2,1,"ng-container",5),e.BQk()),2&t){const n=e.oxw().error;e.oxw();const o=e.MAs(9);e.xp6(1),e.Q6J("ngIf",!n)("ngIfElse",o)}}function G(t,r){if(1&t&&(e.TgZ(0,"div",4),e.YNc(1,V,2,2,"ng-container",5),e.qZA()),2&t){const n=r.isLoading;e.oxw();const o=e.MAs(7);e.xp6(1),e.Q6J("ngIf",!n)("ngIfElse",o)}}function K(t,r){1&t&&e._UZ(0,"app-fullscreen-loader")}function q(t,r){1&t&&e._UZ(0,"app-fullscreen-error")}const ee=function(t,r,n){return{weathers:t,isLoading:r,error:n}},re=m.Bz.forChild([{path:"",component:(()=>{class t{constructor(n,o){this.weatherApi=n,this.router=o}ngOnInit(){this.weathers$=this.weatherApi.getWeather$(function O(t){const n=y.length-t,o=Math.floor(Math.random()*(n-0+1)+0);return y.slice(o,o+t)}(5)),this.isLoading$=this.weatherApi.isLoading$,this.error$=this.weatherApi.error$}goToForecast(n){this.router.navigateByUrl(`forecast/${n}`)}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(N),e.Y36(m.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-main-page"]],decls:10,vars:12,consts:[[3,"ngTemplateOutlet","ngTemplateOutletContext"],["mainTemplate",""],["loaderTemplate",""],["errorTemplate",""],[1,"city-container"],[4,"ngIf","ngIfElse"],["class","city-card",3,"cityWeather","click",4,"ngFor","ngForOf"],[1,"city-card",3,"cityWeather","click"]],template:function(n,o){if(1&n&&(e.GkF(0,0),e.ALo(1,"async"),e.ALo(2,"async"),e.ALo(3,"async"),e.YNc(4,G,2,2,"ng-template",null,1,e.W1O),e.YNc(6,K,1,0,"ng-template",null,2,e.W1O),e.YNc(8,q,1,0,"ng-template",null,3,e.W1O)),2&n){const i=e.MAs(5);e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.kEZ(8,ee,e.lcZ(1,2,o.weathers$),e.lcZ(2,4,o.isLoading$),e.lcZ(3,6,o.error$)))}},directives:[l.tP,l.O5,l.sg,Y,k,X],pipes:[l.Ov],styles:[".city-container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;flex-wrap:wrap;gap:16px;row-gap:24px;cursor:pointer}.city-card[_ngcontent-%COMP%]{width:200px;height:200px}"],changeDetection:0}),t})()}]);let oe=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[re],m.Bz]}),t})(),ae=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[l.ez,oe,v,w,M]]}),t})()}}]);